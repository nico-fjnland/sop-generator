/* ============================================
   FLOWCHART EDITOR MODAL STYLES
   ============================================ */

/* Overlay */
.flowchart-editor-overlay {
  position: fixed;
  inset: 0;
  z-index: 100;
  background-color: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(4px);
  animation: fadeIn 0.2s ease-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Modal Container */
.flowchart-editor-modal {
  position: fixed;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 101;
  width: calc(100vw - 200px);
  height: calc(100vh - 100px);
  max-width: 1100px;
  max-height: 800px;
  background: white;
  border-radius: 16px;
  border: none;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  animation: modalSlideIn 0.3s ease-out;
}

@keyframes modalSlideIn {
  from {
    opacity: 0;
    transform: translate(-50%, -48%) scale(0.96);
  }
  to {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
}

/* Header */
.flowchart-editor-header {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px;
  border-bottom: none;
  background: transparent;
  z-index: 10;
  pointer-events: none;
}

.flowchart-editor-header > * {
  pointer-events: auto;
}

.flowchart-editor-title {
  font-family: 'Quicksand', sans-serif;
  font-size: 18px;
  font-weight: 700;
  color: #003366;
  margin: 0;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.flowchart-editor-header-actions {
  display: flex;
  align-items: center;
  gap: 8px;
}

.flowchart-editor-save-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 7px 14px;
  background: #47D1C6;
  color: white;
  border: none;
  border-radius: 6px;
  font-family: 'Roboto', sans-serif;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.flowchart-editor-save-btn:hover {
  background: #3bc1b6;
}

.flowchart-editor-save-btn svg {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
}

.flowchart-editor-close-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 7px 14px;
  background: #f3f4f6;
  color: #374151;
  border: none;
  border-radius: 6px;
  font-family: 'Roboto', sans-serif;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.flowchart-editor-close-btn:hover {
  background: #e5e7eb;
  color: #111827;
}

.flowchart-editor-close-btn svg {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
}

/* Content Area - Full Canvas */
.flowchart-editor-modal-content {
  position: absolute;
  inset: 0;
  display: flex;
}

/* Canvas Area - Full Width */
.flowchart-editor-canvas {
  flex: 1;
  position: relative;
  background: white;
}

.flowchart-editor-canvas .react-flow {
  width: 100%;
  height: 100%;
}

/* ============================================
   TLDRAW-STYLE TOOLBAR
   ============================================ */

.flowchart-toolbar-container {
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 10;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 0;
}

/* Top row: Action buttons (smaller) - sits directly on bottom row */
.flowchart-toolbar-actions {
  display: flex;
  align-items: center;
  gap: 2px;
  padding: 4px 6px;
  margin-left: 14px;
  background: #EBFAF9;
  border: 1px solid #c5eeeb;
  border-bottom: none;
  border-radius: 8px 8px 0 0;
}

.flowchart-toolbar-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  padding: 0;
  border: none;
  background: transparent;
  color: #5f6368;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.12s ease;
}

.flowchart-toolbar-btn:hover:not(:disabled) {
  background: rgba(0, 0, 0, 0.08);
  color: #202124;
}

.flowchart-toolbar-btn:active:not(:disabled) {
  background: rgba(0, 0, 0, 0.12);
}

.flowchart-toolbar-btn:disabled {
  opacity: 0.35;
  cursor: not-allowed;
}

/* Active tool button */
.flowchart-toolbar-btn.active {
  background: #47D1C6;
  color: white;
}

.flowchart-toolbar-btn.active:hover {
  background: #3bc1b6;
  color: white;
}

.flowchart-toolbar-btn svg {
  width: 16px;
  height: 16px;
}

.flowchart-toolbar-separator {
  width: 1px;
  height: 18px;
  background: #d0d0d0;
  margin: 0 4px;
}

/* Bottom row: Node types (white, larger) */
.flowchart-toolbar-nodes {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 6px 8px;
  background: white;
  border: 1px solid #e5e7eb;
  border-radius: 10px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
}

.flowchart-toolbar-node-item {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  padding: 0;
  border: none;
  background: transparent;
  border-radius: 10px;
  cursor: grab;
  transition: all 0.15s ease;
  position: relative;
}

.flowchart-toolbar-node-item:hover {
  background: var(--node-bg, #f5f5f5);
  transform: scale(1.08);
}

.flowchart-toolbar-node-item:active {
  cursor: grabbing;
  transform: scale(0.95);
}

/* Select mode cursor for canvas */
.flowchart-editor-canvas .react-flow.select-mode,
.flowchart-editor-canvas .react-flow.select-mode .react-flow__pane,
.flowchart-editor-canvas .react-flow.select-mode .react-flow__renderer,
.flowchart-editor-canvas .react-flow.select-mode .react-flow__viewport {
  cursor: default !important;
}

/* Pan mode cursor for canvas */
.flowchart-editor-canvas .react-flow.pan-mode,
.flowchart-editor-canvas .react-flow.pan-mode .react-flow__pane,
.flowchart-editor-canvas .react-flow.pan-mode .react-flow__renderer,
.flowchart-editor-canvas .react-flow.pan-mode .react-flow__viewport {
  cursor: grab !important;
}

.flowchart-editor-canvas .react-flow.pan-mode:active,
.flowchart-editor-canvas .react-flow.pan-mode .react-flow__pane:active,
.flowchart-editor-canvas .react-flow.pan-mode:active .react-flow__pane,
.flowchart-editor-canvas .react-flow.pan-mode:active .react-flow__renderer {
  cursor: grabbing !important;
}

/* ============================================
   SHARED NODE STYLES (used by modal)
   ============================================ */

/* Node styles are imported from FlowchartBlock.css */

/* Custom handle styles for modal */
.flowchart-editor-modal .flowchart-custom-handle.react-flow__handle {
  width: 10px;
  height: 10px;
  background: #9ca3af;
  border: 2px solid white;
  transition: all 0.2s ease;
}

.flowchart-editor-modal .flowchart-custom-handle.react-flow__handle:hover {
  background: #3b82f6;
  transform: scale(1.2);
}

/* Edge styles */
.flowchart-editor-modal .react-flow__edge-path {
  stroke: #003366;
  stroke-width: 1.5;
}

.flowchart-editor-modal .react-flow__edge.selected .react-flow__edge-path {
  stroke: #47D1C6;
  stroke-width: 2;
}

/* Background */
.flowchart-editor-modal .react-flow__background {
  background-color: white;
}

/* ============================================
   RESPONSIVE ADJUSTMENTS
   ============================================ */

@media (max-width: 1200px) {
  .flowchart-editor-modal {
    width: calc(100vw - 100px);
    height: calc(100vh - 60px);
    max-width: 950px;
  }
}

@media (max-width: 900px) {
  .flowchart-editor-modal {
    width: calc(100vw - 40px);
    height: calc(100vh - 40px);
    max-width: none;
  }
  
  .flowchart-toolbar-nodes {
    gap: 2px;
    padding: 4px 6px;
  }
  
  .flowchart-toolbar-node-item {
    width: 36px;
    height: 36px;
  }
  
  .flowchart-toolbar-actions {
    padding: 3px 4px;
    gap: 1px;
  }
  
  .flowchart-toolbar-btn {
    width: 26px;
    height: 26px;
  }
  
  .flowchart-editor-save-btn span,
  .flowchart-editor-close-btn span {
    display: none;
  }
  
  .flowchart-editor-save-btn,
  .flowchart-editor-close-btn {
    padding: 8px;
  }
}

@media (max-width: 768px) {
  .flowchart-editor-modal {
    width: 100vw;
    height: 100vh;
    max-width: none;
    max-height: none;
    border-radius: 0;
  }
  
  .flowchart-toolbar-container {
    bottom: 12px;
  }
  
  .flowchart-toolbar-nodes {
    gap: 2px;
    padding: 4px;
  }
  
  .flowchart-toolbar-node-item {
    width: 32px;
    height: 32px;
  }
  
  .flowchart-toolbar-node-item svg {
    width: 18px;
    height: 18px;
  }
}

/* ============================================
   ERASER TOOL
   ============================================ */

.eraser-overlay {
  position: absolute;
  inset: 0;
  z-index: 100;
  cursor: crosshair;
  touch-action: none;
}

.eraser-trail {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: visible;
}

/* Eraser cursor */
.eraser-overlay:active {
  cursor: crosshair;
}

/* Eraser mode cursor for canvas */
.flowchart-editor-canvas .react-flow.eraser-mode,
.flowchart-editor-canvas .react-flow.eraser-mode .react-flow__pane,
.flowchart-editor-canvas .react-flow.eraser-mode .react-flow__renderer,
.flowchart-editor-canvas .react-flow.eraser-mode .react-flow__viewport {
  cursor: crosshair !important;
}

/* ============================================
   MINIMAP
   ============================================ */

/* ============================================
   MINIMAP - Styled as ContentBox Preview
   ============================================ */

.flowchart-editor-canvas .react-flow__minimap {
  position: absolute !important;
  bottom: 20px !important;
  right: 20px !important;
  left: auto !important;
  top: auto !important;
  transform: none !important;
  overflow: visible !important;
  background-color: #E8FAF9 !important;
  border: 1px solid #47D1C6 !important;
  border-radius: 4px !important;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.06) !important;
  padding: 0 !important;
  padding-left: 0 !important;
  margin: 0 !important;
}

/* Icon container - positioned left side, vertically centered */
.flowchart-editor-canvas .react-flow__minimap::before {
  content: '';
  position: absolute;
  top: 50%;
  left: -10px;
  transform: translateY(-50%);
  width: 18px;
  height: 26px;
  background-image: url("data:image/svg+xml,%3Csvg width='18' height='26' viewBox='0 0 30 44' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.625 0.625C18.338 0.625 21.899 2.1 24.5245 4.72551C27.15 7.35102 28.625 10.912 28.625 14.625V28.625C28.625 32.338 27.15 35.899 24.5245 38.5245C21.899 41.15 18.338 42.625 14.625 42.625C10.912 42.625 7.35099 41.15 4.72548 38.5245C2.09998 35.899 0.625005 32.338 0.625005 28.625V14.625C0.625005 10.912 2.09998 7.35102 4.72548 4.72551C7.35099 2.1 10.912 0.625 14.625 0.625Z' fill='%23E8FAF9' stroke='%23E8FAF9' stroke-width='0.5'/%3E%3Cpath d='M10.4623 1.25966C11.8099 0.839454 13.2134 0.625485 14.625 0.625C18.338 0.625 21.899 2.1 24.5245 4.72551C27.15 7.35102 28.625 10.912 28.625 14.625V28.625C28.625 32.338 27.15 35.899 24.5245 38.5245C21.899 41.15 18.338 42.625 14.625 42.625C10.912 42.625 7.35099 41.15 4.72548 38.5245C2.09998 35.899 0.625005 32.338 0.625005 28.625V14.625C0.623464 12.8005 0.978562 10.9933 1.67033 9.30499' stroke='%2347D1C6' stroke-width='1.25' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M5.61865 2.11832V6.69165' stroke='%2347D1C6' stroke-width='1.25' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M3.33154 4.40498H7.90488' stroke='%2347D1C6' stroke-width='1.25' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M18.2655 12.133H11.0695C10.3788 12.133 9.81885 12.6929 9.81885 13.3837V15.8197C9.81885 16.5104 10.3788 17.0703 11.0695 17.0703H18.2655C18.9562 17.0703 19.5162 16.5104 19.5162 15.8197V13.3837C19.5162 12.6929 18.9562 12.133 18.2655 12.133Z' fill='%23E8FAF9' stroke='%2347D1C6' stroke-width='1.25'/%3E%3Cpath d='M14.6626 17.2943V28.1583' stroke='%2347D1C6' stroke-width='1.25'/%3E%3Cpath d='M21.7367 27.4676V24.5183H7.5874V27.5236' stroke='%2347D1C6' stroke-width='1.25'/%3E%3Cpath d='M14.6626 31.1263C15.6111 31.1263 16.38 30.3574 16.38 29.4089C16.38 28.4605 15.6111 27.6916 14.6626 27.6916C13.7142 27.6916 12.9453 28.4605 12.9453 29.4089C12.9453 30.3574 13.7142 31.1263 14.6626 31.1263Z' fill='%23E8FAF9' stroke='%2347D1C6' stroke-width='1.25'/%3E%3Cpath d='M7.58793 31.1263C8.53639 31.1263 9.30526 30.3574 9.30526 29.4089C9.30526 28.4605 8.53639 27.6916 7.58793 27.6916C6.63948 27.6916 5.87061 28.4605 5.87061 29.4089C5.87061 30.3574 6.63948 31.1263 7.58793 31.1263Z' fill='%23E8FAF9' stroke='%2347D1C6' stroke-width='1.25'/%3E%3Cpath d='M21.7373 31.1263C22.6858 31.1263 23.4547 30.3574 23.4547 29.4089C23.4547 28.4605 22.6858 27.6916 21.7373 27.6916C20.7889 27.6916 20.02 28.4605 20.02 29.4089C20.02 30.3574 20.7889 31.1263 21.7373 31.1263Z' fill='%23E8FAF9' stroke='%2347D1C6' stroke-width='1.25'/%3E%3Cpath d='M12.3662 14.597H16.9676' stroke='%2347D1C6' stroke-width='1.25' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
  background-size: contain;
  background-repeat: no-repeat;
  z-index: 2;
}

/* Caption label - styled like ContentBox, top of minimap */
.flowchart-editor-canvas .react-flow__minimap::after {
  content: 'Diag. Algorithmus';
  position: absolute;
  top: -7px;
  left: 14px;
  padding: 2px 6px;
  background: #47D1C6;
  border-radius: 4px;
  font-family: 'Roboto', sans-serif;
  font-size: 6px;
  font-weight: 600;
  font-style: italic;
  color: white;
  letter-spacing: 0.6px;
  text-transform: uppercase;
  white-space: nowrap;
  z-index: 2;
}

/* MiniMap SVG - aspect ratio matching modal canvas (~1.5:1) */
.flowchart-editor-canvas .react-flow__minimap svg {
  width: 150px !important;
  height: 100px !important;
  display: block !important;
  background: white !important;
  border-radius: 3px !important;
  margin: 3px !important;
  margin-left: 0 !important;
}

/* Viewport mask styling - hidden */
.flowchart-editor-canvas .react-flow__minimap-mask {
  fill: transparent !important;
  stroke: none !important;
  stroke-width: 0 !important;
}
