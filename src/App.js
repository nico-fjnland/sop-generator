import React, { useRef } from 'react';
import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';
import Editor from './components/Editor';
import ZoomControl from './components/ZoomControl';
import ZoomWrapper from './components/ZoomWrapper';
import Login from './pages/auth/Login';
import Register from './pages/auth/Register';
import Account from './pages/Account';
import PrivateRoute from './components/PrivateRoute';
import { AuthProvider } from './contexts/AuthContext';
import { ZoomProvider } from './contexts/ZoomContext';
import { ThemeProvider, useTheme } from './contexts/ThemeContext';
import { TipTapFocusProvider } from './contexts/TipTapFocusContext';
import { StatusProvider } from './contexts/StatusContext';
import HelpButton from './components/HelpButton';
import AnimatedBackgroundGradient from './components/AnimatedBackgroundGradient';
import SessionTimeoutWarning from './components/SessionTimeoutWarning';
import './App.css';

const AppContent = () => {
  const componentRef = useRef();
  const { getGradientClass, timeOfDay } = useTheme();
  
  // Gradient für Tag/Nacht-Modus (schwächer/transparenter)
  const bottomGradient = timeOfDay === 'night'
    ? 'linear-gradient(to top, rgba(10, 15, 25, 0.5) 0%, rgba(10, 15, 25, 0.25) 35%, rgba(10, 15, 25, 0.1) 60%, rgba(10, 15, 25, 0.02) 85%, transparent 100%)'
    : 'linear-gradient(to top, rgba(255, 255, 255, 0.5) 0%, rgba(255, 255, 255, 0.25) 35%, rgba(255, 255, 255, 0.1) 60%, rgba(255, 255, 255, 0.02) 85%, transparent 100%)';

  return (
    <div className={`min-h-screen flex flex-col transition-colors duration-200 ${getGradientClass()}`}>
      {/* Background elements - fixed, nicht vom Zoom betroffen */}
      <AnimatedBackgroundGradient />
      <div className="grain-overlay" />
      
      {/* Logo oben links - wechselt je nach Theme */}
      <div className="fixed top-6 left-6 z-50 no-print hidden lg:block">
        {timeOfDay === 'night' ? (
          <svg className="h-8 w-auto" viewBox="0 0 946 160" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M932.122 45.2856H419.456C412.141 45.2856 406.212 51.2151 406.212 58.5295V118.763C406.212 126.077 412.141 132.006 419.456 132.006H932.122C939.437 132.006 945.366 126.077 945.366 118.763V58.5295C945.366 51.2151 939.437 45.2856 932.122 45.2856Z" fill="#3399FF"/>
          <path d="M466.712 98.5289L455.742 65.2185L455.642 64.8506H449.421L441.428 111.037H448.017L453.836 77.526L464.906 111.037H471.127L479.12 64.8506H472.565L466.712 98.5289Z" fill="white"/>
          <path d="M518.149 67.8928C517.023 66.7087 515.662 65.7727 514.153 65.145C512.644 64.5173 511.021 64.2115 509.387 64.2473C507.167 64.1197 504.948 64.4993 502.896 65.3569C500.845 66.2145 499.016 67.5277 497.548 69.1971C494.137 73.2336 491.965 78.1694 491.294 83.4109L489.989 91.8387C489.81 93.3592 489.732 94.89 489.755 96.4208C489.595 100.361 490.774 104.239 493.1 107.424C494.217 108.775 495.623 109.859 497.215 110.594C498.807 111.329 500.543 111.697 502.297 111.671H502.731C504.86 111.721 506.974 111.316 508.935 110.486C510.895 109.656 512.657 108.418 514.102 106.855C517.487 102.845 519.646 97.9455 520.323 92.7418L521.661 84.1131C521.835 82.5808 521.925 81.04 521.928 79.4978V77.8256C521.82 74.1842 520.489 70.6854 518.149 67.8928V67.8928ZM503.066 105.517H502.698C501.685 105.547 500.683 105.305 499.795 104.817C498.907 104.329 498.166 103.612 497.648 102.742C496.398 100.311 495.909 97.5611 496.243 94.8488L496.444 92.3405L497.782 83.4109C498.222 79.7737 499.605 76.3148 501.795 73.3777C502.606 72.3916 503.628 71.6002 504.786 71.0618C505.943 70.5235 507.207 70.2521 508.484 70.2674H508.885C509.888 70.2313 510.882 70.4593 511.768 70.9289C512.655 71.3986 513.402 72.0932 513.935 72.9429C515.188 75.372 515.666 78.1264 515.307 80.8357L515.039 83.8122L513.567 93.277C512.163 101.605 508.684 105.517 503.066 105.517Z" fill="white"/>
          <path d="M536.712 64.8506L535.675 70.7368H547.18L540.19 111.037H546.778L553.768 70.7368H565.273L566.31 64.8506H536.712Z" fill="white"/>
          <path d="M587.912 64.8506L565.839 110.301L565.471 111.037H572.494L577.946 99.1977H591.959L593.364 111.037H599.885L593.431 64.8506H587.912ZM591.257 93.3449H580.722L589.15 75.1847L591.257 93.3449Z" fill="white"/>
          <path d="M635.605 97.5243C635.327 99.932 634.256 102.179 632.562 103.912C630.875 105.324 628.702 106.02 626.509 105.852C625.781 105.926 625.046 105.848 624.35 105.622C623.655 105.396 623.014 105.027 622.47 104.539C621.925 104.051 621.488 103.455 621.187 102.788C620.887 102.121 620.728 101.399 620.723 100.668C620.606 99.5563 620.606 98.4354 620.723 97.3236L626.208 64.8494H619.519L614.034 97.1229C613.713 98.9572 613.77 100.838 614.201 102.649C614.632 104.461 615.429 106.165 616.542 107.658C617.71 108.997 619.164 110.056 620.797 110.756C622.429 111.457 624.199 111.781 625.973 111.705H626.375C630.195 111.805 633.911 110.454 636.776 107.925C639.737 105.095 641.588 101.299 641.993 97.2234L647.512 64.8159H640.823L635.605 97.5243Z" fill="white"/>
          <path d="M654.701 111.037H661.29L664.734 91.1043H679.517L680.554 85.2182H665.738L668.246 70.7368H685.537L686.574 64.8506H662.694L654.701 111.037Z" fill="white"/>
          <path d="M717.543 98.5289L706.573 65.2185L706.44 64.8506H700.219L692.259 111.037H698.848L704.667 77.526L715.704 111.037H721.924L729.917 64.8506H723.396L717.543 98.5289Z" fill="white"/>
          <path d="M757.709 64.8506L735.636 110.301L735.268 111.037H742.291L747.743 99.1977H761.756L763.161 111.037H769.649L763.228 64.8506H757.709ZM761.054 93.3449H750.519L758.913 75.1847L761.054 93.3449Z" fill="white"/>
          <path d="M810.151 84.2818H793.529L796.94 64.8506H790.352L782.358 111.037H788.947L792.559 90.1679H809.147L805.502 111.037H812.09L820.017 65.4527L820.117 64.8506H813.495L810.151 84.2818Z" fill="white"/>
          <path d="M849.281 100.435L844.431 64.8506H836.505L828.512 111.037H835.1L838.144 93.3116L840.284 78.5962L845.133 110.602L845.2 111.037H850.184L865.969 79.4992L863.294 92.5759L860.083 111.037H866.638L874.564 65.4527L874.665 64.8506H866.504L849.281 100.435Z" fill="white"/>
          <path d="M914.329 70.7368L915.366 64.8506H891.019L883.025 111.037H907.64L908.677 105.151H890.617L893.226 90.1679H908.711L909.714 84.2818H894.229L896.57 70.7368H914.329Z" fill="white"/>
          <path d="M126.851 66.5899H125.714C123.02 66.9662 120.558 68.3183 118.795 70.3897C117.032 72.4611 116.09 75.1076 116.149 77.8271V109.532C116.149 122.917 121.466 135.754 130.931 145.218C140.395 154.683 153.232 160 166.616 160C180.001 160 192.838 154.683 202.302 145.218C211.767 135.754 217.084 122.917 217.084 109.532V57.4932C217.099 47.3505 214.019 37.4447 208.255 29.0991C202.663 20.922 194.789 14.5713 185.613 10.8385C184.271 10.3246 182.841 10.08 181.405 10.1187C179.969 10.1574 178.554 10.4786 177.242 11.064C175.93 11.6494 174.746 12.4875 173.758 13.5305C172.769 14.5735 171.997 15.801 171.483 17.1427C170.969 18.4845 170.724 19.9142 170.763 21.3504C170.802 22.7867 171.123 24.2013 171.708 25.5134C172.294 26.8255 173.132 28.0094 174.175 28.9976C175.218 29.9858 176.445 30.759 177.787 31.2728C183.279 33.0811 188.022 36.6499 191.281 41.4263C194.54 46.2028 196.133 51.9204 195.813 57.6938V109.532C195.951 113.326 195.3 117.107 193.901 120.636C192.502 124.165 190.386 127.365 187.686 130.034C184.504 132.829 180.79 134.954 176.768 136.281C172.745 137.609 168.497 138.112 164.275 137.759C157.037 137.183 150.277 133.918 145.325 128.607C140.373 123.297 137.589 116.325 137.52 109.064V77.2252C137.503 74.4214 136.386 71.7364 134.41 69.7476C132.433 67.7587 129.755 66.6249 126.952 66.5899H126.851Z" fill="white"/>
          <path d="M12.3054 114.817C10.279 114.818 8.28376 115.315 6.49394 116.265C4.70412 117.216 3.17417 118.59 2.03804 120.268C0.97467 121.79 0.302524 123.55 0.0808722 125.393C-0.14078 127.236 0.0948684 129.106 0.767148 130.836C1.62556 133.043 2.67759 135.169 3.91091 137.191C8.12465 144.199 14.2822 149.834 21.6363 153.411C29.5531 157.293 38.2706 159.263 47.0875 159.163C60.7662 159.163 71.6355 155.819 79.4615 148.729C83.4009 145.08 86.4887 140.608 88.506 135.632C90.5232 130.655 91.4202 125.296 91.1335 119.933C91.5219 109.825 88.1902 99.9247 81.7691 92.1078C75.4147 84.7501 65.0469 78.3956 50.7328 73.2452C43.839 70.7045 37.4771 66.9056 31.9707 62.0415C30.1741 60.3525 28.7382 58.3172 27.7495 56.0583C26.7609 53.7994 26.2401 51.3636 26.2184 48.8979C25.9821 43.5519 27.8558 38.327 31.4356 34.3496C33.3075 32.4533 35.5597 30.9754 38.0443 30.0127C40.5288 29.05 43.1892 28.6245 45.8501 28.7644C48.7118 28.6252 51.5663 29.1576 54.1854 30.3191C56.8045 31.4805 59.1153 33.2388 60.9333 35.4533C62.5832 37.5344 63.8309 39.9049 64.6122 42.4432C65.4112 44.838 66.9485 46.9177 69.0036 48.3839C71.0587 49.8501 73.5257 50.6273 76.0501 50.6036C78.0966 50.6052 80.1109 50.0951 81.91 49.1196C83.709 48.1441 85.2357 46.7342 86.351 45.0183C87.4331 43.4445 88.0988 41.6223 88.2859 39.7216C88.4731 37.8209 88.1756 35.9035 87.4212 34.1489C86.8861 32.9115 86.2507 31.6073 85.5484 30.3029C81.9633 23.7061 76.5055 18.3181 69.863 14.8183C60.9263 10.3906 50.93 8.5485 41.0021 9.49993C31.0742 10.4514 21.6099 14.1584 13.6768 20.2027C9.56603 23.7245 6.30095 28.1268 4.12402 33.0828C1.94709 38.0387 0.914166 43.4212 1.10171 48.831C0.937529 58.2144 4.24895 67.3271 10.3991 74.4159C16.7201 81.7402 27.3219 88.2952 41.9704 93.8135C48.6203 96.1471 54.7783 99.6968 60.1306 104.282C62.0711 106.416 63.5603 108.92 64.5085 111.644C65.4568 114.368 65.8448 117.256 65.649 120.134C65.649 132.943 59.1942 139.732 46.9536 139.732C38.5257 139.732 32.2381 137.425 28.3251 132.876C26.1708 130.246 24.6492 127.157 23.8772 123.846C23.2085 121.279 21.7128 119.003 19.6212 117.371C17.5295 115.739 14.9584 114.841 12.3054 114.817V114.817Z" fill="white"/>
          <path d="M255.812 10.3027C254.166 10.3027 252.537 10.6274 251.018 11.2581C249.498 11.8887 248.117 12.813 246.955 13.978C245.793 15.1431 244.873 16.5259 244.246 18.0473C243.62 19.5687 243.299 21.1989 243.304 22.8443V146.588C243.299 148.233 243.62 149.863 244.246 151.385C244.873 152.906 245.793 154.289 246.955 155.454C248.117 156.619 249.498 157.543 251.018 158.174C252.537 158.805 254.166 159.129 255.812 159.129H256.648C259.974 159.129 263.164 157.808 265.516 155.456C267.868 153.104 269.19 149.914 269.19 146.588V104.983H292.6C307.684 104.983 319.59 100.803 328.018 92.6089C336.446 84.4151 340.66 73.0105 340.66 58.6964C341.168 45.7969 336.551 33.2202 327.817 23.7137C319.289 14.8175 307.751 10.336 293.236 10.336L255.812 10.3027ZM293.169 84.2813H269.19V31.038H293.437C296.475 30.9983 299.477 31.7066 302.177 33.1005C304.878 34.4944 307.194 36.5312 308.921 39.0312C312.824 44.9709 314.734 51.9996 314.373 59.0977C314.787 65.7429 312.857 72.3228 308.921 77.6927C306.967 79.9139 304.534 81.6615 301.805 82.803C299.076 83.9445 296.122 84.45 293.169 84.2813V84.2813Z" fill="white"/>
          <path d="M140.162 49.499V34.2819H155.379C157.024 34.1639 158.562 33.4274 159.686 32.2205C160.809 31.0136 161.434 29.4259 161.434 27.777C161.434 26.1282 160.809 24.5405 159.686 23.3336C158.562 22.1267 157.024 21.3901 155.379 21.2721H140.162V6.05503C140.044 4.41041 139.307 2.87156 138.1 1.74815C136.893 0.624728 135.306 0 133.657 0C132.008 0 130.42 0.624728 129.213 1.74815C128.007 2.87156 127.27 4.41041 127.152 6.05503V21.2721H111.935C110.29 21.3901 108.751 22.1267 107.628 23.3336C106.504 24.5405 105.88 26.1282 105.88 27.777C105.88 29.4259 106.504 31.0136 107.628 32.2205C108.751 33.4274 110.29 34.1639 111.935 34.2819H127.152V49.499C127.27 51.1436 128.007 52.6825 129.213 53.8059C130.42 54.9293 132.008 55.5538 133.657 55.5538C135.306 55.5538 136.893 54.9293 138.1 53.8059C139.307 52.6825 140.044 51.1436 140.162 49.499V49.499Z" fill="#3399FF"/>
          </svg>
        ) : (
          <svg className="h-8 w-auto" viewBox="0 0 946 160" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M932.122 45.2856H419.456C412.141 45.2856 406.212 51.2151 406.212 58.5295V118.763C406.212 126.077 412.141 132.006 419.456 132.006H932.122C939.437 132.006 945.366 126.077 945.366 118.763V58.5295C945.366 51.2151 939.437 45.2856 932.122 45.2856Z" fill="#3399FF"/>
          <path d="M466.712 98.5289L455.742 65.2185L455.642 64.8506H449.421L441.428 111.037H448.017L453.836 77.526L464.906 111.037H471.127L479.12 64.8506H472.565L466.712 98.5289Z" fill="white"/>
          <path d="M518.149 67.8928C517.023 66.7087 515.662 65.7727 514.153 65.145C512.644 64.5173 511.021 64.2115 509.387 64.2473C507.167 64.1197 504.948 64.4993 502.896 65.3569C500.845 66.2145 499.016 67.5277 497.548 69.1971C494.137 73.2336 491.965 78.1694 491.294 83.4109L489.989 91.8387C489.81 93.3592 489.732 94.89 489.755 96.4208C489.595 100.361 490.774 104.239 493.1 107.424C494.217 108.775 495.623 109.859 497.215 110.594C498.807 111.329 500.543 111.697 502.297 111.671H502.731C504.86 111.721 506.974 111.316 508.935 110.486C510.895 109.656 512.657 108.418 514.102 106.855C517.487 102.845 519.646 97.9455 520.323 92.7418L521.661 84.1131C521.835 82.5808 521.925 81.04 521.928 79.4978V77.8256C521.82 74.1842 520.489 70.6854 518.149 67.8928V67.8928ZM503.066 105.517H502.698C501.685 105.547 500.683 105.305 499.795 104.817C498.907 104.329 498.166 103.612 497.648 102.742C496.398 100.311 495.909 97.5611 496.243 94.8488L496.444 92.3405L497.782 83.4109C498.222 79.7737 499.605 76.3148 501.795 73.3777C502.606 72.3916 503.628 71.6002 504.786 71.0618C505.943 70.5235 507.207 70.2521 508.484 70.2674H508.885C509.888 70.2313 510.882 70.4593 511.768 70.9289C512.655 71.3986 513.402 72.0932 513.935 72.9429C515.188 75.372 515.666 78.1264 515.307 80.8357L515.039 83.8122L513.567 93.277C512.163 101.605 508.684 105.517 503.066 105.517Z" fill="white"/>
          <path d="M536.712 64.8506L535.675 70.7368H547.18L540.19 111.037H546.778L553.768 70.7368H565.273L566.31 64.8506H536.712Z" fill="white"/>
          <path d="M587.912 64.8506L565.839 110.301L565.471 111.037H572.494L577.946 99.1977H591.959L593.364 111.037H599.885L593.431 64.8506H587.912ZM591.257 93.3449H580.722L589.15 75.1847L591.257 93.3449Z" fill="white"/>
          <path d="M635.605 97.5243C635.327 99.932 634.256 102.179 632.562 103.912C630.875 105.324 628.702 106.02 626.509 105.852C625.781 105.926 625.046 105.848 624.35 105.622C623.655 105.396 623.014 105.027 622.47 104.539C621.925 104.051 621.488 103.455 621.187 102.788C620.887 102.121 620.728 101.399 620.723 100.668C620.606 99.5563 620.606 98.4354 620.723 97.3236L626.208 64.8494H619.519L614.034 97.1229C613.713 98.9572 613.77 100.838 614.201 102.649C614.632 104.461 615.429 106.165 616.542 107.658C617.71 108.997 619.164 110.056 620.797 110.756C622.429 111.457 624.199 111.781 625.973 111.705H626.375C630.195 111.805 633.911 110.454 636.776 107.925C639.737 105.095 641.588 101.299 641.993 97.2234L647.512 64.8159H640.823L635.605 97.5243Z" fill="white"/>
          <path d="M654.701 111.037H661.29L664.734 91.1043H679.517L680.554 85.2182H665.738L668.246 70.7368H685.537L686.574 64.8506H662.694L654.701 111.037Z" fill="white"/>
          <path d="M717.543 98.5289L706.573 65.2185L706.44 64.8506H700.219L692.259 111.037H698.848L704.667 77.526L715.704 111.037H721.924L729.917 64.8506H723.396L717.543 98.5289Z" fill="white"/>
          <path d="M757.709 64.8506L735.636 110.301L735.268 111.037H742.291L747.743 99.1977H761.756L763.161 111.037H769.649L763.228 64.8506H757.709ZM761.054 93.3449H750.519L758.913 75.1847L761.054 93.3449Z" fill="white"/>
          <path d="M810.151 84.2818H793.529L796.94 64.8506H790.352L782.358 111.037H788.947L792.559 90.1679H809.147L805.502 111.037H812.09L820.017 65.4527L820.117 64.8506H813.495L810.151 84.2818Z" fill="white"/>
          <path d="M849.281 100.435L844.431 64.8506H836.505L828.512 111.037H835.1L838.144 93.3116L840.284 78.5962L845.133 110.602L845.2 111.037H850.184L865.969 79.4992L863.294 92.5759L860.083 111.037H866.638L874.564 65.4527L874.665 64.8506H866.504L849.281 100.435Z" fill="white"/>
          <path d="M914.329 70.7368L915.366 64.8506H891.019L883.025 111.037H907.64L908.677 105.151H890.617L893.226 90.1679H908.711L909.714 84.2818H894.229L896.57 70.7368H914.329Z" fill="white"/>
          <path d="M126.851 66.5899H125.714C123.02 66.9662 120.558 68.3183 118.795 70.3897C117.032 72.4611 116.09 75.1076 116.149 77.8271V109.532C116.149 122.917 121.466 135.754 130.931 145.218C140.395 154.683 153.232 160 166.616 160C180.001 160 192.838 154.683 202.302 145.218C211.767 135.754 217.084 122.917 217.084 109.532V57.4932C217.099 47.3505 214.019 37.4447 208.255 29.0991C202.663 20.922 194.789 14.5713 185.613 10.8385C184.271 10.3246 182.841 10.08 181.405 10.1187C179.969 10.1574 178.554 10.4786 177.242 11.064C175.93 11.6494 174.746 12.4875 173.758 13.5305C172.769 14.5735 171.997 15.801 171.483 17.1427C170.969 18.4845 170.724 19.9142 170.763 21.3504C170.802 22.7867 171.123 24.2013 171.708 25.5134C172.294 26.8255 173.132 28.0094 174.175 28.9976C175.218 29.9858 176.445 30.759 177.787 31.2728C183.279 33.0811 188.022 36.6499 191.281 41.4263C194.54 46.2028 196.133 51.9204 195.813 57.6938V109.532C195.951 113.326 195.3 117.107 193.901 120.636C192.502 124.165 190.386 127.365 187.686 130.034C184.504 132.829 180.79 134.954 176.768 136.281C172.745 137.609 168.497 138.112 164.275 137.759C157.037 137.183 150.277 133.918 145.325 128.607C140.373 123.297 137.589 116.325 137.52 109.064V77.2252C137.503 74.4214 136.386 71.7364 134.41 69.7476C132.433 67.7587 129.755 66.6249 126.952 66.5899H126.851Z" fill="#004D99"/>
          <path d="M12.3054 114.817C10.279 114.818 8.28376 115.315 6.49394 116.265C4.70412 117.216 3.17417 118.59 2.03804 120.268C0.97467 121.79 0.302524 123.55 0.0808722 125.393C-0.14078 127.236 0.0948684 129.106 0.767148 130.836C1.62556 133.043 2.67759 135.169 3.91091 137.191C8.12465 144.199 14.2822 149.834 21.6363 153.411C29.5531 157.293 38.2706 159.263 47.0875 159.163C60.7662 159.163 71.6355 155.819 79.4615 148.729C83.4009 145.08 86.4887 140.608 88.506 135.632C90.5232 130.655 91.4202 125.296 91.1335 119.933C91.5219 109.825 88.1902 99.9247 81.7691 92.1078C75.4147 84.7501 65.0469 78.3956 50.7328 73.2452C43.839 70.7045 37.4771 66.9056 31.9707 62.0415C30.1741 60.3525 28.7382 58.3172 27.7495 56.0583C26.7609 53.7994 26.2401 51.3636 26.2184 48.8979C25.9821 43.5519 27.8558 38.327 31.4356 34.3496C33.3075 32.4533 35.5597 30.9754 38.0443 30.0127C40.5288 29.05 43.1892 28.6245 45.8501 28.7644C48.7118 28.6252 51.5663 29.1576 54.1854 30.3191C56.8045 31.4805 59.1153 33.2388 60.9333 35.4533C62.5832 37.5344 63.8309 39.9049 64.6122 42.4432C65.4112 44.838 66.9485 46.9177 69.0036 48.3839C71.0587 49.8501 73.5257 50.6273 76.0501 50.6036C78.0966 50.6052 80.1109 50.0951 81.91 49.1196C83.709 48.1441 85.2357 46.7342 86.351 45.0183C87.4331 43.4445 88.0988 41.6223 88.2859 39.7216C88.4731 37.8209 88.1756 35.9035 87.4212 34.1489C86.8861 32.9115 86.2507 31.6073 85.5484 30.3029C81.9633 23.7061 76.5055 18.3181 69.863 14.8183C60.9263 10.3906 50.93 8.5485 41.0021 9.49993C31.0742 10.4514 21.6099 14.1584 13.6768 20.2027C9.56603 23.7245 6.30095 28.1268 4.12402 33.0828C1.94709 38.0387 0.914166 43.4212 1.10171 48.831C0.937529 58.2144 4.24895 67.3271 10.3991 74.4159C16.7201 81.7402 27.3219 88.2952 41.9704 93.8135C48.6203 96.1471 54.7783 99.6968 60.1306 104.282C62.0711 106.416 63.5603 108.92 64.5085 111.644C65.4568 114.368 65.8448 117.256 65.649 120.134C65.649 132.943 59.1942 139.732 46.9536 139.732C38.5257 139.732 32.2381 137.425 28.3251 132.876C26.1708 130.246 24.6492 127.157 23.8772 123.846C23.2085 121.279 21.7128 119.003 19.6212 117.371C17.5295 115.739 14.9584 114.841 12.3054 114.817V114.817Z" fill="#004D99"/>
          <path d="M255.812 10.3027C254.166 10.3027 252.537 10.6274 251.018 11.2581C249.498 11.8887 248.117 12.813 246.955 13.978C245.793 15.1431 244.873 16.5259 244.246 18.0473C243.62 19.5687 243.299 21.1989 243.304 22.8443V146.588C243.299 148.233 243.62 149.863 244.246 151.385C244.873 152.906 245.793 154.289 246.955 155.454C248.117 156.619 249.498 157.543 251.018 158.174C252.537 158.805 254.166 159.129 255.812 159.129H256.648C259.974 159.129 263.164 157.808 265.516 155.456C267.868 153.104 269.19 149.914 269.19 146.588V104.983H292.6C307.684 104.983 319.59 100.803 328.018 92.6089C336.446 84.4151 340.66 73.0105 340.66 58.6964C341.168 45.7969 336.551 33.2202 327.817 23.7137C319.289 14.8175 307.751 10.336 293.236 10.336L255.812 10.3027ZM293.169 84.2813H269.19V31.038H293.437C296.475 30.9983 299.477 31.7066 302.177 33.1005C304.878 34.4944 307.194 36.5312 308.921 39.0312C312.824 44.9709 314.734 51.9996 314.373 59.0977C314.787 65.7429 312.857 72.3228 308.921 77.6927C306.967 79.9139 304.534 81.6615 301.805 82.803C299.076 83.9445 296.122 84.45 293.169 84.2813V84.2813Z" fill="#004D99"/>
          <path d="M140.162 49.499V34.2819H155.379C157.024 34.1639 158.562 33.4274 159.686 32.2205C160.809 31.0136 161.434 29.4259 161.434 27.777C161.434 26.1282 160.809 24.5405 159.686 23.3336C158.562 22.1267 157.024 21.3901 155.379 21.2721H140.162V6.05503C140.044 4.41041 139.307 2.87156 138.1 1.74815C136.893 0.624728 135.306 0 133.657 0C132.008 0 130.42 0.624728 129.213 1.74815C128.007 2.87156 127.27 4.41041 127.152 6.05503V21.2721H111.935C110.29 21.3901 108.751 22.1267 107.628 23.3336C106.504 24.5405 105.88 26.1282 105.88 27.777C105.88 29.4259 106.504 31.0136 107.628 32.2205C108.751 33.4274 110.29 34.1639 111.935 34.2819H127.152V49.499C127.27 51.1436 128.007 52.6825 129.213 53.8059C130.42 54.9293 132.008 55.5538 133.657 55.5538C135.306 55.5538 136.893 54.9293 138.1 53.8059C139.307 52.6825 140.044 51.1436 140.162 49.499V49.499Z" fill="#3399FF"/>
          </svg>
        )}
      </div>
      
      {/* UI-Elemente außerhalb des Zoom-Wrappers - bleiben bei fixer Größe */}
      <HelpButton />
      <ZoomControl />
      <SessionTimeoutWarning />
      
      {/* Bottom gradient für bessere Sichtbarkeit der Steuerungselemente */}
      <div 
        className="fixed bottom-0 left-0 right-0 h-36 pointer-events-none z-40 no-print transition-all duration-300"
        style={{ background: bottomGradient }}
      />
      
      <Routes>
        {/* Auth Routes - No Zoom, No FloatingButton constraints */}
        <Route path="/login" element={<Login />} />
        <Route path="/register" element={<Register />} />
        
        {/* Account Page - With Zoom wrapper */}
        <Route path="/account" element={
          <PrivateRoute>
            <ZoomWrapper>
              <Account />
            </ZoomWrapper>
          </PrivateRoute>
        } />
        
        {/* Editor Route - With Zoom wrapper */}
        <Route path="/" element={
          <ZoomWrapper>
            <main className="px-6 no-print flex justify-center pb-24">
              <div className="w-full flex justify-center">
                <div
                  ref={componentRef}
                  className="w-full max-w-5xl print:bg-white"
                >
                  <Editor />
                </div>
              </div>
            </main>
          </ZoomWrapper>
        } />
      </Routes>
    </div>
  );
};

function App() {
  return (
    <AuthProvider>
      <ThemeProvider>
        <StatusProvider>
          <ZoomProvider>
            <TipTapFocusProvider>
              <Router>
                <AppContent />
              </Router>
            </TipTapFocusProvider>
          </ZoomProvider>
        </StatusProvider>
      </ThemeProvider>
    </AuthProvider>
  );
}

export default App;
